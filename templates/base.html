{% load static i18n %}
<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE }}" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}{{ SITE_NAME }} - {{ SITE_TAGLINE }}. O gamă largă de instrumente de construcție de închiriat la prețuri accesibile.{% endblock %}">
    <meta name="keywords" content="închiriere instrumente, instrumente de construcție, închiriere unelte, Moldova, Chișinău">

    <title>{% block title %}{{ SITE_NAME }}{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Culorile principale ale brandului (din logo)
                        brand: {
                            red: '#E53935',
                            'red-dark': '#C62828',
                            yellow: '#F5A623',
                            'yellow-dark': '#E09800',
                            'yellow-light': '#FFD54F',
                        },
                        // Tema întunecată
                        dark: {
                            DEFAULT: '#0D0D0D',
                            50: '#1A1A1A',
                            100: '#242424',
                            200: '#2E2E2E',
                            300: '#3A3A3A',
                            400: '#4A4A4A',
                            500: '#5A5A5A',
                            border: '#333333',
                        },
                        // Pentru compatibilitate inversă
                        primary: {
                            DEFAULT: '#F5A623',
                            hover: '#E09800',
                            light: '#FFD54F',
                        },
                    },
                    fontFamily: {
                        'inter': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'float-slow': 'float 8s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'gradient': 'gradient 8s ease infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                        'bounce-slow': 'bounce 3s infinite',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out',
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'scale-in': 'scaleIn 0.3s ease-out',
                        'spin-slow': 'spin 20s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        gradient: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideDown: {
                            '0%': { opacity: '0', transform: 'translateY(-10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        },
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                        'gradient-conic': 'conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))',
                        'grid-pattern': 'url("data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23ffffff\' fill-opacity=\'0.03\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',
                    },
                    boxShadow: {
                        'glow-yellow': '0 0 60px -15px rgba(245, 166, 35, 0.5)',
                        'glow-red': '0 0 60px -15px rgba(229, 57, 53, 0.5)',
                        'glow-sm': '0 0 20px -5px rgba(245, 166, 35, 0.3)',
                        'inner-glow': 'inset 0 1px 0 0 rgba(255, 255, 255, 0.05)',
                    },
                    backdropBlur: {
                        xs: '2px',
                    },
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <style type="text/tailwindcss">
        @layer utilities {
            .text-gradient {
                @apply bg-clip-text text-transparent bg-gradient-to-r from-brand-yellow to-brand-red;
            }
            .text-gradient-reverse {
                @apply bg-clip-text text-transparent bg-gradient-to-r from-brand-red to-brand-yellow;
            }
            .bg-glass {
                @apply bg-dark-100/80 backdrop-blur-md border border-dark-border/50;
            }
            .bg-glass-dark {
                @apply bg-dark/90 backdrop-blur-xl border border-dark-border/30;
            }
            .btn-primary {
                @apply inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-brand-yellow to-brand-yellow-dark text-dark font-semibold rounded-xl transition-all duration-300 hover:shadow-glow-yellow hover:-translate-y-0.5 active:translate-y-0;
            }
            .btn-secondary {
                @apply inline-flex items-center justify-center gap-2 px-6 py-3 bg-dark-200 border border-dark-border text-white font-semibold rounded-xl transition-all duration-300 hover:border-brand-yellow hover:text-brand-yellow;
            }
            .btn-outline {
                @apply inline-flex items-center justify-center gap-2 px-6 py-3 border-2 border-dark-border text-white font-semibold rounded-xl transition-all duration-300 hover:border-brand-yellow hover:text-brand-yellow;
            }
            .card-hover {
                @apply transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl hover:shadow-brand-yellow/10;
            }
            .link-underline {
                @apply relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-brand-yellow after:transition-all after:duration-300 hover:after:w-full;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        }
    </style>

    <!-- Legacy CSS (pentru compatibilitate cu alte pagini) -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}?v=1.0.2">
    {% block extra_css %}{% endblock %}
</head>
<body class="font-inter bg-dark text-white antialiased selection:bg-brand-yellow/30 selection:text-white">
    <!-- Preloader overlay (optional) -->
    <div id="preloader" class="fixed inset-0 z-[9999] bg-dark flex items-center justify-center transition-opacity duration-500">
        <div class="relative">
            <div class="w-16 h-16 border-4 border-dark-300 rounded-full"></div>
            <div class="absolute top-0 left-0 w-16 h-16 border-4 border-brand-yellow border-t-transparent rounded-full animate-spin"></div>
        </div>
    </div>
    <script>
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            preloader.style.opacity = '0';
            setTimeout(() => preloader.style.display = 'none', 500);
        });
    </script>

    <!-- Header -->
    {% include 'includes/header.html' %}

    <!-- Messages -->
    {% if messages %}
    <div class="fixed top-24 right-4 z-50 flex flex-col gap-3 max-w-sm">
        {% for message in messages %}
        <div class="animate-slide-down bg-dark-200 border border-dark-border rounded-xl p-4 shadow-xl flex items-start gap-3" role="alert">
            {% if message.tags == 'success' %}
            <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
            </div>
            {% elif message.tags == 'error' %}
            <div class="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </div>
            {% else %}
            <div class="w-8 h-8 rounded-full bg-brand-yellow/20 flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 text-brand-yellow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            {% endif %}
            <p class="text-sm text-gray-300">{{ message }}</p>
        </div>
        {% endfor %}
    </div>
    <script>
        setTimeout(() => {
            document.querySelectorAll('[role="alert"]').forEach(alert => {
                alert.style.opacity = '0';
                alert.style.transform = 'translateX(100%)';
                alert.style.transition = 'all 0.3s ease';
                setTimeout(() => alert.remove(), 300);
            });
        }, 5000);
    </script>
    {% endif %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    {% include 'includes/footer.html' %}

    <!-- Back to top button -->
    <button id="backToTop"
            class="fixed bottom-8 right-8 z-40 w-12 h-12 bg-dark-200 border border-dark-border rounded-full flex items-center justify-center text-gray-400 opacity-0 invisible transition-all duration-300 hover:bg-brand-yellow hover:text-dark hover:border-brand-yellow hover:shadow-glow-sm"
            aria-label="Back to top">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
        </svg>
    </button>
    <script>
        const backToTop = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 500) {
                backToTop.classList.remove('opacity-0', 'invisible');
                backToTop.classList.add('opacity-100', 'visible');
            } else {
                backToTop.classList.add('opacity-0', 'invisible');
                backToTop.classList.remove('opacity-100', 'visible');
            }
        });
        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>

    <!-- JavaScript -->
    <script src="{% static 'js/main.js' %}?v=1.0.2"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
